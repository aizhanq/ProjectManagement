<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projects and Employees</title>
</head>
<body>

    <h1>Projects and Employees</h1>

    <!-- Display Projects -->
    <h2>Projects</h2>
    <ul id="projectsList"></ul>

    <!-- Display Employees for Selected Project -->
    <h2>Employees for Selected Project</h2>
    <ul id="employeesList"></ul>

    <script>
        // Fetch projects from API
        fetch('/api/projects')
            .then(response => response.json())
            .then(projects => {
                const projectsList = document.getElementById('projectsList');
                projects.forEach(project => {
                    const listItem = document.createElement('li');
                    listItem.textContent = `Project ID: ${project.projectId}, Project Name: ${project.projectName}`;
                    listItem.addEventListener('click', () => showEmployees(project.projectId));
                    projectsList.appendChild(listItem);
                });
            });

        // Fetch employees for the selected project
        function showEmployees(projectId) {
            fetch(`/api/projects/${projectId}`)
                .then(response => response.json())
                .then(project => {
                    const employeesList = document.getElementById('employeesList');
                    employeesList.innerHTML = ''; // Clear the previous list

                    if (project.employees && project.employees.length > 0) {
                        project.employees.forEach(employee => {
                            const listItem = document.createElement('li');
                            listItem.textContent = `Employee ID: ${employee.employeeId}, Name: ${employee.firstName} ${employee.lastName}`;
                            employeesList.appendChild(listItem);
                        });
                    } else {
                        const listItem = document.createElement('li');
                        listItem.textContent = 'No employees for this project.';
                        employeesList.appendChild(listItem);
                    }
                });
        }
    </script>

</body>
</html>
